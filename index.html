<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Word Guess Game</title>

    <!-- External CSS Stylesheets -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Share+Tech" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">

    <!-- Local CSS Stylesheets -->
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />

    <!-- Javascript Includes -->
    <script src="assets/javascript/words.js"></script>
    <script src="assets/javascript/game.js"></script>

</head>

<body>
    <!-- Banner & Navigation -->
    <header>
        <div id="#banner">
            <img src="assets/images/banner-scifi.png" alt="Sci-Fi Word Guess Banner" width="100%">
        </div>
    </header>

    <!-- Game Display -->
    <div class="container">
        <h1>Welcome to Science Fiction Word Guess</h1>
        <h5>a game of guessing based on science fiction movies and tv shows</h5>
        <hr>
        <p id="keyPrompt" style="color:red">Press and key to get started</p>
        <p>Wins: <span id="wins">0</span></p>
        <p>Losses: <span id="losses">0</span></p>
        <p>Current word: <span id="currentWord"> ""</span></p>
        <hr>
        <p>Number of guesses remaining: <span id="guessesLeft"> 10 </span></p>
        <p>Letters already guessed: <span id="lettersGuessed"> None </span></p>

        <!-- Javascript variable and function declarations -->
        <script src="assets/javascript/words.js"></script>
        <script src="assets/javascript/prompts.js"></script>
        <script src="assets/javascript/scoreboard.js"></script>
        <script src="assets/javascript/game.js"></script>

        <!-- Main Game Logic Processing -->
        <script type="text/javascript">

            /* Save screen elements for later updates*/
            prompts.getElementIds(document);

            /*----------------------------------------*/
            /* Game Engine:  Process the input events */
            /*----------------------------------------*/
            document.onkeyup = function (event) {

                // Get keystroke
                var userGuess = event.key.toLowerCase();

                // Create a new game if none in progress
                if (game.gameInProgress === false) {

                    // Clear the board 
                    game.resetGame();

                    // Write out the starting state
                    prompts.reportResults(game, scoreboard);
                    prompts.status("Let's do this!! - Choose a letter")
                    return;
                };

                // Validate input - confirm they entered a letter
                // if (game.validGuess() == false) {
                //      prompts.status("Guess " + (game.maxGuesses - game.guessesLeft) + ": Oops, invalid key, try again");
                //      return;
                // }

                // Play a round
                if (game.playRound(userGuess)) {
                    prompts.status("Guess " + (game.maxGuesses - game.guessesLeft) + ": Nice guess -- keep going");
                } else {
                    prompts.status("Guess " + (game.maxGuesses - game.guessesLeft) + ": Oops, try again");
                }

                // Score the results
                if (game.wonGame())
                {
                    scoreboard.wins++;

                    game.gameInProgress = false;
                    prompts.status("Congratulations!  You won!! -- Press any key to start again");
                }
                else if (game.gameOver())
                {
                    scoreboard.losses++;

                    game.gameInProgress = false;
                    prompts.status("Sorry! It was: [ " + game.solution + " ] Better luck next time! -- Press any key to start again");
                }
                
                // Update the display with new state
                prompts.reportResults(game, scoreboard);
            };
        </script>
    </div>
</body>

</html>